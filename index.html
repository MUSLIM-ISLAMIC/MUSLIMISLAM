<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#02050a">
        <title>MI ORGNIZATION|MUSLIM ISLAM ORG| ISLAMIC PORTAL ORG</title>
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff9d">
<link rel="apple-touch-icon" href="https://i.ibb.co/hxKxjqWk/logo.png">
    <link rel="icon" href="https://i.ibb.co/hxKxjqWk/logo.png" type="image/png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <style>
        /* ==========================================================================
           ADVANCED DIGITAL CSS ARCHITECTURE (Fully Responsive)
           ========================================================================== */
        
        :root {
            --bg-deep: #02050a;
            --bg-surface: #0a0f16;
            --primary-glow: #00ff9d;
            --secondary-glow: #00b8ff;
            --admin-gold: #ffd700;
            --glass-light: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --shadow-cyber: 0 0 20px rgba(0, 255, 157, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-deep);
            color: #ffffff;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            overflow-x: hidden;
            width: 100vw;
        }

        /* DIGITAL SCROLLBAR */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: var(--primary-glow); border-radius: 10px; }

        /* BACKGROUND PARTICLES LAYER */
        #particles-js {
            position: fixed;
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            z-index: -1;
            background: radial-gradient(circle at center, #0a1118 0%, #02050a 100%);
        }

        /* ==========================================================================
           5-SECOND SECURE SPLASH SCREEN
           ========================================================================== */
        #splash-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000000;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-in-out, visibility 0.8s ease-in-out;
        }

        .splash-logo {
            width: 120px;
            filter: drop-shadow(0 0 20px var(--primary-glow));
            animation: breathe 2s infinite alternate ease-in-out;
            margin-bottom: 30px;
        }

        @keyframes breathe {
            0% { transform: scale(0.95); filter: drop-shadow(0 0 10px var(--primary-glow)); }
            100% { transform: scale(1.05); filter: drop-shadow(0 0 40px var(--primary-glow)); }
        }

        .cyber-loader {
            width: 200px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .cyber-loader-fill {
            position: absolute;
            top: 0; left: 0; height: 100%;
            background: var(--primary-glow);
            width: 0%;
            /* Strict 5s animation for loader */
            animation: cyber-load 5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes cyber-load {
            0% { width: 0%; box-shadow: 0 0 10px var(--primary-glow); }
            50% { width: 60%; box-shadow: 0 0 20px var(--primary-glow); }
            100% { width: 100%; box-shadow: 0 0 30px var(--primary-glow); }
        }

        .splash-text {
            margin-top: 20px;
            letter-spacing: 4px;
            font-size: 12px;
            text-transform: uppercase;
            color: var(--primary-glow);
            font-family: monospace;
        }

        /* ==========================================================================
           GLASSMORPHISM PANELS & UI
           ========================================================================== */
        .glass-panel {
            background: var(--glass-light);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow: var(--shadow-cyber);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .glass-panel:hover {
            border-color: rgba(0, 255, 157, 0.3);
            transform: translateY(-3px);
        }

        .text-gradient {
            background: linear-gradient(135deg, #ffffff 0%, var(--primary-glow) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* ==========================================================================
           REAL-TIME CHAT UI ARCHITECTURE
           ========================================================================== */
        .chat-wrapper {
            height: 450px;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            scroll-behavior: smooth;
        }

        .message-row {
            display: flex;
            flex-direction: column;
            width: 100%;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-row.admin-row { align-items: flex-end; }
        .message-row.user-row { align-items: flex-start; }

        .chat-name-tag {
            font-size: 0.7rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 6px;
            letter-spacing: 0.5px;
        }

        .user-row .chat-name-tag { color: #8892b0; padding-left: 5px; }
        .admin-row .chat-name-tag { color: var(--admin-gold); padding-right: 5px; }

        .chat-bubble {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 0.9rem;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
        }

        .user-bubble {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom-left-radius: 4px;
            color: #e2e8f0;
        }

        .admin-bubble {
            background: rgba(255, 215, 0, 0.08);
            border: 1px solid rgba(255, 215, 0, 0.5);
            border-bottom-right-radius: 4px;
            color: #ffffff;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
        }

        .badge-verified {
            background: var(--admin-gold);
            color: #000;
            font-size: 0.55rem;
            font-weight: 900;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
        }

        /* ==========================================================================
           MOBILE OPTIMIZATION (MEDIA QUERIES)
           ========================================================================== */
        @media screen and (max-width: 768px) {
            .hero-title { font-size: 2.5rem !important; line-height: 1.2 !important; }
            .hero-subtitle { font-size: 0.9rem !important; padding: 0 15px; }
            
            /* Navbar Mobile Fix */
            .nav-container { padding: 15px !important; }
            .nav-links { display: none; }
            
            /* Stats Grid Fix */
            .stats-grid { grid-template-columns: 1fr 1fr !important; gap: 10px !important; }
            .stats-card { padding: 15px !important; }
            .stats-card i { font-size: 1.2rem !important; }
            
            /* Chat Input Stack for Mobile */
            .chat-inputs { flex-direction: column !important; gap: 10px !important; }
            .chat-inputs input { width: 100% !important; }
            .chat-send-btn { width: 100% !important; height: 50px !important; border-radius: 12px !important; }
            
            /* General Spacing */
            section { padding-left: 15px !important; padding-right: 15px !important; }
        }
        /* üéµ FLOATING MUSIC BUTTON STYLES ‚ú® */
.mio-music-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 65px;
    height: 65px;
    border-radius: 50%;
    background: rgba(0, 255, 157, 0.1);
    border: 2px solid #00ff9d;
    color: #00ff9d;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    z-index: 99999;
    box-shadow: 0 0 25px rgba(0, 255, 157, 0.3);
    backdrop-filter: blur(10px);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.mio-music-btn:hover {
    transform: scale(1.15) rotate(10deg);
    background: #00ff9d;
    color: #000;
}

.mio-music-btn.is-playing {
    animation: mio-pulse-glow 2s infinite;
}

@keyframes mio-pulse-glow {
    0% { box-shadow: 0 0 0 0 rgba(0, 255, 157, 0.8); }
    70% { box-shadow: 0 0 0 25px rgba(0, 255, 157, 0); }
    100% { box-shadow: 0 0 0 0 rgba(0, 255, 157, 0); }
}
/* ==========================================
   üåü MIO MEMBERS UI STYLES
   ========================================== */
.member-section {
    position: relative;
    padding: 80px 20px;
    background: linear-gradient(180deg, transparent 0%, rgba(168, 85, 247, 0.03) 50%, transparent 100%);
}

.member-card {
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(168, 85, 247, 0.1);
    border-radius: 24px;
    padding: 40px 20px 30px;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    margin-top: 50px; /* Space for the overlapping image */
}

.member-card:hover {
    transform: translateY(-10px);
    border-color: rgba(168, 85, 247, 0.4);
    box-shadow: 0 20px 40px rgba(168, 85, 247, 0.1);
}

.member-img-wrap {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    padding: 4px;
    background: linear-gradient(135deg, #a855f7, #00ff9d);
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    transition: all 0.3s ease;
    z-index: 10;
}

.member-img-wrap:hover {
    transform: translateX(-50%) scale(1.1) rotate(5deg);
    box-shadow: 0 0 25px rgba(168, 85, 247, 0.6);
}

.member-img-wrap img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #05070a;
}

/* The Box On Top of Circle Bottom */
.member-name-badge {
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
    background: #05070a;
    border: 1px solid rgba(168, 85, 247, 0.5);
    padding: 5px 15px;
    border-radius: 20px;
    white-space: nowrap;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    z-index: 20;
}

/* Full Screen Image Viewer */
#image-viewer-modal {
    backdrop-filter: blur(15px);
    transition: opacity 0.3s ease;
}
.viewer-img {
    max-height: 80vh;
    box-shadow: 0 0 50px rgba(0,0,0,0.8);
    border: 2px solid rgba(255,255,255,0.1);
}
.digital-clock {
    background: rgba(0,0,0,0.8);
    border: 1px solid rgba(255, 215, 0, 0.2);
    display: flex;
    gap: 10px;
    padding: 15px;
    border-radius: 12px;
    justify-content: center;
    box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.05);
}
.clock-val { font-family: 'JetBrains Mono', monospace; font-size: 24px; color: #fbbf24; font-weight: 900; }
.clock-label { font-size: 8px; color: #71717a; text-transform: uppercase; font-weight: bold; }
/* ==========================================
   ‚è±Ô∏è DIGITAL COUNTDOWN INTERFACE STYLES
   ========================================== */
.countdown-box {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 15px;
    margin-bottom: 25px;
}
.time-segment {
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(255, 193, 7, 0.3);
    border-radius: 12px;
    padding: 10px;
    min-width: 60px;
    text-align: center;
    box-shadow: inset 0 0 15px rgba(255, 193, 7, 0.1), 0 5px 15px rgba(0,0,0,0.5);
    position: relative;
    overflow: hidden;
}
.time-segment::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 50%;
    background: rgba(255,255,255,0.05); border-bottom: 1px solid rgba(255,255,255,0.02);
}
.time-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 900;
    color: #ffc107;
    text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
    line-height: 1;
}
.time-label {
    font-size: 9px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-top: 5px;
    font-weight: bold;
}
.pinned-badge {
    position: absolute; top: 15px; right: -30px; background: #00ff9d; color: #000;
    font-size: 10px; font-weight: 900; padding: 5px 30px; transform: rotate(45deg);
    box-shadow: 0 0 15px rgba(0,255,157,0.5); z-index: 20; letter-spacing: 2px;
}

    </style>
</head>
<body>
<div id="update-overlay" class="fixed inset-0 bg-[#05070a]/95 backdrop-blur-xl z-[100000] hidden flex items-center justify-center p-6">
    <div class="max-w-md w-full glass-panel p-8 border border-cyan-500/30 text-center animate__animated animate__zoomIn">
        <div class="w-20 h-20 bg-cyan-500/20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_30px_rgba(0,255,157,0.2)]">
            <i class="fas fa-cloud-download-alt text-3-xl text-cyan-400 animate-bounce"></i>
        </div>
        
        <h2 class="text-2xl font-black text-white mb-2 uppercase tracking-tighter">New Update Detected!</h2>
        <p id="update-ver-text" class="text-cyan-400 font-mono text-sm mb-6">Version: 1.0.0</p>
        
        <div class="w-full bg-white/5 rounded-full h-2 mb-4 overflow-hidden">
            <div id="update-progress" class="h-full bg-gradient-to-r from-cyan-500 to-green-500 w-0 transition-all duration-300"></div>
        </div>
        
        <p id="update-status" class="text-gray-400 text-[10px] uppercase tracking-widest mb-6">Initializing Cache Buster...</p>
        
        <button id="update-confirm-btn" class="w-full py-4 bg-cyan-500 text-black font-black rounded-xl hover:bg-cyan-400 transition-all shadow-lg uppercase tracking-widest">
            UPDATE NOW ‚ö°
        </button>
    </div>
</div>

    <div id="particles-js"></div>

    <div id="splash-container">
        <img src="https://i.ibb.co/hxKxjqWk/logo.png" alt="Logo" class="splash-logo">
        <div class="cyber-loader"><div class="cyber-loader-fill"></div></div>
        <div class="splash-text" id="splash-status">Establishing Secure Link...</div>
        <div class="mt-2 text-[9px] text-gray-600 font-mono tracking-widest">AWAITING HANDSHAKE</div>
    </div>

    <nav class="fixed w-full top-0 z-50 p-4 transition-all duration-300" id="navbar">
        <div class="nav-container max-w-7xl mx-auto glass-panel px-6 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="https://i.ibb.co/hxKxjqWk/logo.png" class="w-10 h-10 hover:rotate-180 transition-transform duration-700" alt="Logo">
                <div>
                    <h1 class="font-black text-lg tracking-wider text-white leading-tight">üÖº.üÖ∏ ùêéùêëùêÜùêçùêàùêôùêÄùêìùêàùêéùêç</h1>
                    <p class="text-[9px] text-green-400 font-mono tracking-widest leading-none mt-1">SECURE NODE</p>
                </div>
            </div>
            
            <div class="nav-links hidden md:flex gap-8 text-xs font-bold tracking-widest text-gray-400">
                <a href="#home" class="hover:text-green-400 transition">HOME</a>
                <a href="#intel" class="hover:text-green-400 transition">INTEL</a>
                <a href="#projects" class="hover:text-green-400 transition">PROJECTS</a>
                <a href="#chat" class="hover:text-green-400 transition">COMMUNITY</a>
            </div>

            <div class="flex items-center gap-2 bg-black/50 px-3 py-1.5 rounded-full border border-white/5">
                <div class="w-1.5 h-1.5 bg-red-500 rounded-full animate-ping"></div>
                <span class="text-[10px] font-mono text-gray-400">VIEWS: <span id="nav-live-views" class="text-green-400 font-bold">0000</span></span>
            </div>
        </div>
    </nav>

    <section id="home" class="min-h-screen flex flex-col justify-center items-center text-center pt-24 relative z-10">
        <div data-aos="zoom-in" data-aos-duration="1500">
            <h2 class="hero-title text-5xl md:text-7xl font-black mb-6 tracking-tighter">
                THE NEXT-GEN <br> 
                <span class="text-gradient">ISLAMIC NETWORK</span>
            </h2>
            <p class="hero-subtitle text-gray-400 max-w-2xl mx-auto text-sm md:text-base mb-10 leading-relaxed px-4">
                A mi fully synchronized digital infrastructure connecting global members through real-time encrypted data, high-fidelity UI, and seamless tracking.
            </p>
            <audio id="portal-bg-music" loop preload="auto"></audio>
<audio id="portal-click-sfx" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=ui-click-43196.mp3" preload="auto"></audio>

<button id="mio-music-toggle" class="mio-music-btn" onclick="togglePortalMusic()" title="Play/Pause Background Music">
    <i class="fas fa-volume-mute" id="mio-music-icon"></i>
</button>            
<div class="flex flex-wrap justify-center gap-4 mb-6">
    <a href="javascript:void(0)" 
       onclick="triggerAccessSound('#organization-members')" 
       class="px-8 py-3 bg-transparent border-2 border-purple-500 text-purple-400 text-sm font-black rounded-full hover:bg-purple-500 hover:text-white transition-all shadow-[0_0_15px_rgba(168,85,247,0.2)] uppercase tracking-widest flex items-center gap-2">
        <i class="fas fa-users"></i> VIEW TEAM
    </a>
</div>
            <div class="flex flex-wrap justify-center gap-4">
    <a href="javascript:void(0)" 
       onclick="triggerAccessSound('#launch-pad-section')" 
       class="px-6 py-3 bg-green-500 text-black text-sm font-black rounded-full hover:bg-green-400 transition shadow-[0_0_15px_rgba(0,255,157,0.3)]">
        ACCESS PORTAL
    </a>
</div>

        </div>
    </section>
<section id="organization-members" class="member-section max-w-7xl mx-auto mt-20">
    <div class="text-center mb-16 relative z-10" data-aos="fade-up">
        <h2 class="text-3xl md:text-5xl font-black mb-4">OUR <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-cyan-500">PIONEERS</span></h2>
        <p class="text-gray-400 font-mono tracking-widest text-sm uppercase">The minds behind Muslim Islam Organization</p>
    </div>
    
    <div id="members-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-20 px-4">
        <div class="text-center w-full col-span-full py-10 text-purple-400 font-mono animate-pulse">
            <i class="fas fa-satellite-dish fa-spin text-4xl mb-4"></i><br>FETCHING TEAM PROFILES...
        </div>
    </div>
</section>

<div id="image-viewer-modal" class="fixed inset-0 bg-black/90 z-[99999] hidden flex-col items-center justify-center p-4 opacity-0">
    <button onclick="closeImageViewer()" class="absolute top-6 right-6 text-white hover:text-purple-400 transition-colors z-50">
        <i class="fas fa-times text-4xl"></i>
    </button>
    <img id="viewer-full-img" src="" class="viewer-img rounded-2xl transform scale-90 transition-transform duration-300" alt="Full View">
    <h3 id="viewer-name" class="text-2xl font-black text-white mt-6 tracking-widest"></h3>
    <p id="viewer-role" class="text-purple-400 font-mono uppercase text-sm mt-2"></p>
</div>
    <section id="intel" class="py-16 max-w-7xl mx-auto relative z-10">
        <div class="text-center mb-12" data-aos="fade-up">
            <h3 class="text-xs font-mono text-green-400 tracking-[0.2em] mb-2">SYSTEM SCAN</h3>
            <h2 class="text-3xl font-black text-white">DEVICE INTELLIGENCE</h2>
        </div>

        <div class="stats-grid grid grid-cols-2 md:grid-cols-4 gap-4 px-4">
            <div class="stats-card glass-panel p-6 flex flex-col items-center justify-center text-center" data-aos="flip-up" data-aos-delay="100">
                <i class="fas fa-network-wired text-xl text-blue-400 mb-3 opacity-80"></i>
                <p class="text-[9px] text-gray-500 uppercase tracking-widest mb-1">Network IP</p>
                <h4 id="display-ip" class="text-sm font-mono font-bold text-white">Scanning...</h4>
            </div>

            <div class="stats-card glass-panel p-6 flex flex-col items-center justify-center text-center" data-aos="flip-up" data-aos-delay="200">
                <i class="fas fa-satellite-dish text-xl text-green-400 mb-3 opacity-80"></i>
                <p class="text-[9px] text-gray-500 uppercase tracking-widest mb-1">Server Status</p>
                <h4 class="text-sm font-bold text-green-400">Connected</h4>
            </div>

            <div class="stats-card glass-panel p-6 flex flex-col items-center justify-center text-center" data-aos="flip-up" data-aos-delay="300">
                <i class="fas fa-microchip text-xl text-purple-400 mb-3 opacity-80"></i>
                <p class="text-[9px] text-gray-500 uppercase tracking-widest mb-1">System Architecture</p>
                <h4 id="display-os" class="text-sm font-bold text-white">Detecting...</h4>
            </div>

            <div class="stats-card glass-panel p-6 flex flex-col items-center justify-center text-center" data-aos="flip-up" data-aos-delay="400">
                <i class="fas fa-globe text-xl text-yellow-400 mb-3 opacity-80"></i>
                <p class="text-[9px] text-gray-500 uppercase tracking-widest mb-1">Total Network Pings</p>
                <h4 id="display-views" class="text-2xl font-black text-yellow-400">0</h4>
            </div>
        </div>
    </section>
<section id="mi-launchpad" class="max-w-7xl mx-auto px-4 py-20 hidden">
    <div class="text-center mb-12">
        <h2 class="text-4xl md:text-6xl font-black tracking-tighter text-white uppercase italic">
            NEXT <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 underline decoration-yellow-500/30">GEN</span> DEPLOYMENTS
        </h2>
        <p class="text-[10px] font-mono text-yellow-500/60 mt-2 tracking-[0.5em] uppercase">Status: Satellite Link Established</p>
    </div>

    <div id="launch-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        </div>
</section>

    <section id="projects" class="py-16 max-w-7xl mx-auto relative z-10 px-4">
    
    <div class="flex flex-col md:flex-row justify-between items-center mb-10" data-aos="fade-right">
        <div class="text-center md:text-left">
            <h3 class="text-xs font-mono text-green-400 tracking-[0.2em] mb-2 shadow-green-500/50 drop-shadow-lg">LIVE DIRECTORY</h3>
            <h2 class="text-3xl font-black text-white uppercase tracking-tighter">MUSLIM ISLAM INITIATIVES</h2>
        </div>
    </div>

    <section id="launch-pad-section" class="mb-20 hidden animate__animated animate__fadeIn">
        <div class="text-center mb-10 relative z-10">
            <div class="inline-block px-4 py-2 rounded-full bg-yellow-500/10 border border-yellow-500/30 text-yellow-400 font-mono text-xs font-black tracking-widest mb-4 uppercase shadow-[0_0_15px_rgba(234,179,8,0.2)]">
                <i class="fas fa-satellite animate-pulse mr-2"></i> Upcoming Deployments
            </div>
            <h2 class="text-3xl md:text-5xl font-black mb-4 text-white uppercase italic">
                SYSTEM <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 underline decoration-yellow-500/30">LAUNCHPAD</span>
            </h2>
        </div>
        
        <div id="launcher-container" class="grid grid-cols-1 md:grid-cols-2 gap-8 px-4">
            </div>
    </section>

    <section id="active-projects-section" class="relative z-10">
        <div class="text-center mb-12">
            <div class="inline-block px-4 py-2 rounded-full bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 font-mono text-xs font-black tracking-widest mb-4 uppercase shadow-[0_0_15px_rgba(6,182,212,0.2)]">
                <i class="fas fa-globe animate-spin-slow mr-2"></i> Operational Servers
            </div>
            <h2 class="text-3xl md:text-5xl font-black mb-4 text-white uppercase">
                ACTIVE <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">NODES</span>
            </h2>
        </div>
        
        <div id="projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 px-4">
            <div class="text-center w-full col-span-full py-10 text-cyan-400 font-mono animate-pulse">
                <i class="fas fa-network-wired text-4xl mb-4"></i><br>ESTABLISHING SECURE CONNECTION TO MIO DATABANK...
            </div>
        </div>
    </section>

</section>
        <div id="project-render-area" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="glass-panel p-5 animate-pulse">
                <div class="w-full h-40 bg-white/5 rounded-lg mb-4"></div>
                <div class="h-4 bg-white/10 w-2/3 rounded mb-2"></div>
                <div class="h-3 bg-white/5 w-full rounded"></div>
            </div>
        </div>
    </section>

    <section id="chat" class="py-16 max-w-4xl mx-auto relative z-10 px-4">
        <div class="text-center mb-10" data-aos="fade-up">
            <h2 class="text-3xl font-black text-white">GLOBAL ENCRYPTED CHAT</h2>
            <p class="text-gray-500 mt-2 text-xs">Messages are synced across all active network nodes instantly.</p>
        </div>

        <div class="glass-panel overflow-hidden border border-green-500/20 shadow-[0_0_30px_rgba(0,255,157,0.05)]" data-aos="zoom-in">
            <div class="bg-black/40 border-b border-white/5 p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-green-500/10 flex items-center justify-center border border-green-500/30">
                        <i class="fas fa-satellite text-green-400 text-xs"></i>
                    </div>
                    <div>
                        <h4 class="font-bold text-white text-sm">Community Relay</h4>
                        <p class="text-[8px] text-green-400 uppercase tracking-widest">End-to-End Synced</p>
                    </div>
                </div>
            </div>

            <div id="chat-messages-container" class="chat-wrapper bg-[#020408]">
                </div>

            <div class="p-4 bg-black/40 border-t border-white/5">
                <div class="chat-inputs flex gap-3">
                    <div class="relative w-full md:w-1/3">
                        <i class="fas fa-user-secret absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs"></i>
                        <input type="text" id="user-name-input" placeholder="Display Name" class="w-full bg-black/60 border border-white/10 rounded-xl py-3 pl-8 pr-3 text-white text-sm outline-none focus:border-green-500 transition">
                    </div>
                    
                    <div class="relative flex-1 flex gap-2">
                        <input type="text" id="user-msg-input" placeholder="Transmit message..." class="w-full bg-black/60 border border-white/10 rounded-xl py-3 px-4 text-white text-sm outline-none focus:border-green-500 transition" onkeypress="handleEnter(event)">
                        <button onclick="sendUserMessage()" class="chat-send-btn w-14 bg-green-500 text-black flex items-center justify-center rounded-xl hover:bg-green-400 transition shadow-lg active:scale-95">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-8 text-center border-t border-white/5 mt-10 relative z-10 bg-black/30">
        <p class="text-[10px] text-gray-500 font-mono tracking-widest">¬© 2026 M.I.O DIGITAL INFRASTRUCTURE</p>
    </footer>

    <script>
        // --- 1. FIREBASE INITIALIZATION ---
        // Setup configuration object
        const firebaseConfig = {
            apiKey: "AIzaSyBbnU8DkthpYQMHOLLyj6M0cc05qXfjMcw",
            authDomain: "ramadan-2385b.firebaseapp.com",
            databaseURL: "https://ramadan-2385b-default-rtdb.firebaseio.com",
            projectId: "ramadan-2385b",
            storageBucket: "ramadan-2385b.firebasestorage.app",
            messagingSenderId: "882828936310",
            appId: "1:882828936310:web:7f97b921031fe130fe4b57"
        };
        
        // Initialize Firebase securely
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // --- 2. PARTICLES.JS ENGINE CONFIGURATION ---
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 60, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": ["#00ff9d", "#00b8ff", "#ffffff"] },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.4, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1, "sync": false } },
                "size": { "value": 2, "random": true },
                "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.1, "width": 1 },
                "move": { "enable": true, "speed": 1.5, "direction": "none", "random": false, "straight": false, "out_mode": "out" }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }, "resize": true },
                "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 0.4 } }, "push": { "particles_nb": 3 } }
            },
            "retina_detect": true
        });

        // --- 3. STRICT 5-SECOND SPLASH SCREEN LOGIC ---
        document.addEventListener("DOMContentLoaded", () => {
            const splash = document.getElementById('splash-container');
            const statusText = document.getElementById('splash-status');
            const body = document.body;
            
            // Lock scrolling
            body.style.overflow = 'hidden';

            // Simulate loading statuses
            setTimeout(() => { statusText.innerText = "Authenticating Node..."; }, 1500);
            setTimeout(() => { statusText.innerText = "Syncing Realtime DB..."; }, 3000);
            setTimeout(() => { statusText.innerText = "System Ready. Initializing UI..."; }, 4200);

            // Exactly 5 seconds timer
            setTimeout(() => {
                splash.style.opacity = '0';
                
                setTimeout(() => {
                    splash.style.display = 'none';
                    body.style.overflow = 'auto';
                    body.style.overflowX = 'hidden';
                    
                    // FIX: Initialize AOS *after* splash screen finishes
                    if(typeof AOS !== 'undefined') {
                        AOS.init({ duration: 1000, once: false, offset: 50 });
                    } else {
                        console.error("AOS Library Failed to Load from CDN");
                    }
                    
                    // Navbar Blur Effect
                    window.addEventListener('scroll', () => {
                        const nav = document.getElementById('navbar');
                        if(window.scrollY > 30) {
                            nav.classList.add('bg-[#02050a]/90', 'backdrop-blur-lg', 'border-b', 'border-white/5');
                        } else {
                            nav.classList.remove('bg-[#02050a]/90', 'backdrop-blur-lg', 'border-b', 'border-white/5');
                        }
                    });

                }, 800); // Wait for CSS opacity transition
            }, 5000);
        });

        // --- 4. ROBUST DEVICE TRACKING & INTEL (FIXED CORS ISSUE) ---
        async function executeSurveillance() {
            // Setup Default/Fallback Values (For offline/local file execution)
            let ipAddress = "Encrypted Local Node";
            
            // Device Detection Logic (Works completely offline without APIs)
            const ua = navigator.userAgent;
            let os = "Unknown OS";
            if (ua.indexOf("Win") !== -1) os = "Windows";
            if (ua.indexOf("Mac") !== -1) os = "MacOS";
            if (ua.indexOf("Linux") !== -1) os = "Linux";
            if (ua.indexOf("Android") !== -1) os = "Android";
            if (ua.indexOf("like Mac") !== -1) os = "iOS";
            
            let deviceType = window.innerWidth <= 768 ? "Mobile" : "Desktop";
            document.getElementById('display-os').innerText = `${os} (${deviceType})`;

            // Attempt IP Fetch with Try-Catch to prevent script breaking on local files (CORS)
            try {
                // Using ipify which is often more lenient, or just failing gracefully
                const response = await fetch('https://api.ipify.org?format=json');
                if(response.ok) {
                    const data = await response.json();
                    ipAddress = data.ip;
                }
            } catch (error) {
                console.warn("Client blocked IP API request (Likely CORS due to local file run). Using secure fallback.");
                // This prevents the scary red error from breaking other JS code.
            }

            document.getElementById('display-ip').innerText = ipAddress;

            // Log securely to Firebase Analytics (Only if we are connected to internet)
            if(navigator.onLine) {
                const logData = {
                    ip: ipAddress,
                    os: os,
                    device: deviceType,
                    timestamp: new Date().toISOString(),
                    origin: window.location.protocol
                };
                // Push quietly
                database.ref('analytics/visitors').push(logData).catch(e => console.log("DB Push Delay"));

                // Sync Live Views Counter
                const viewsRef = database.ref('analytics/global_views');
                viewsRef.transaction((currentViews) => {
                    return (currentViews || 0) + 1;
                });
            }
        }

        // Listen for View Updates
        database.ref('analytics/global_views').on('value', (snapshot) => {
            const views = snapshot.val() || 0;
            const formattedViews = views.toString().padStart(4, '0');
            document.getElementById('nav-live-views').innerText = formattedViews;
            
            if(typeof gsap !== 'undefined') {
                gsap.to('#display-views', { innerHTML: views, duration: 1.5, snap: { innerHTML: 1 } });
            } else {
                document.getElementById('display-views').innerText = views;
            }
        });

        // --- 5. IDENTITY REAL-TIME CHAT ARCHITECTURE ---
        function handleEnter(e) { if (e.key === 'Enter') sendUserMessage(); }

        function sendUserMessage() {
            const nameInput = document.getElementById('user-name-input');
            const msgInput = document.getElementById('user-msg-input');
            
            const name = nameInput.value.trim();
            const message = msgInput.value.trim();

            if (!message) {
                Swal.fire({
                    toast: true, position: 'top', icon: 'warning',
                    title: 'Message field is empty',
                    showConfirmButton: false, timer: 2000,
                    background: '#111', color: '#fff'
                });
                return;
            }

            const payload = {
                senderName: name === "" ? "Unknown Node" : name,
                messageText: message,
                isAdmin: false,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            };

            // Push to Firebase and clear input
            database.ref('system_chat').push(payload).then(() => {
                msgInput.value = ""; 
            });
        }

        // Live Chat Listener
        database.ref('system_chat').limitToLast(50).on('value', (snapshot) => {
            const container = document.getElementById('chat-messages-container');
            container.innerHTML = ''; 
            
            if (!snapshot.exists()) {
                container.innerHTML = `<div class="text-center text-gray-600 mt-10 text-xs">Awaiting first transmission...</div>`;
                return;
            }

            snapshot.forEach((child) => {
                const data = child.val();
                const isAdmin = data.isAdmin === true;
                
                const rowClass = isAdmin ? "admin-row" : "user-row";
                const bubbleClass = isAdmin ? "admin-bubble" : "user-bubble";
                const badgeHTML = isAdmin ? `<span class="badge-verified"><i class="fas fa-check"></i> Verified Admin</span>` : ``;
                
                // Format Timestamp gracefully
                let timeStr = "";
                if(data.timestamp) {
                    const dt = new Date(data.timestamp);
                    timeStr = dt.getHours() + ":" + (dt.getMinutes()<10?'0':'') + dt.getMinutes();
                }

                container.innerHTML += `
                    <div class="message-row ${rowClass}">
                        <div class="chat-name-tag">
                            ${data.senderName} ${badgeHTML}
                        </div>
                        <div class="chat-bubble ${bubbleClass}">
                            ${data.messageText}
                            <div style="font-size: 0.55rem; opacity: 0.5; margin-top: 4px; text-align: right;">${timeStr}</div>
                        </div>
                    </div>
                `;
            });
            
            // Auto-scroll logic
            setTimeout(() => { container.scrollTop = container.scrollHeight; }, 100);
        });

        // --- 6. PROJECTS RENDER MODULE ---
        function initializeProjects() {
            database.ref('organization_projects').on('value', (snapshot) => {
                const renderArea = document.getElementById('project-render-area');
                
                if (!snapshot.exists()) {
                    renderArea.innerHTML = `<div class="col-span-full text-center text-gray-500 p-8 glass-panel text-sm">No initiatives published by Admin yet.</div>`;
                    return;
                }

                renderArea.innerHTML = ''; 
                
                snapshot.forEach((child) => {
                    const p = child.val();
                    const projectId = child.key;
                    const defaultLogo = 'https://via.placeholder.com/400x200/0a0f16/00ff9d?text=Project+Data';
                    
                    renderArea.innerHTML += `
                        <div class="glass-panel p-5 group flex flex-col h-full" data-aos="fade-up">
                            <div class="overflow-hidden rounded-lg mb-4 border border-white/5 relative bg-black/50 aspect-video flex items-center justify-center">
                                <img src="${p.logoLink || defaultLogo}" alt="Project" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition duration-500" onerror="this.src='${defaultLogo}'">
                            </div>
                            
                            <h4 class="text-xl font-bold text-white mb-2 group-hover:text-green-400 transition">${p.title}</h4>
                            <p class="text-xs text-gray-400 mb-5 flex-1 leading-relaxed">${p.description}</p>
                            
                            <div class="flex justify-between items-center border-t border-white/5 pt-3 mt-auto">
                                <div class="flex items-center gap-2 text-yellow-500 text-xs font-bold bg-yellow-500/10 px-3 py-1.5 rounded-md border border-yellow-500/20">
                                    <i class="fas fa-star"></i> <span id="star-${projectId}">${p.starCount || 0}</span>
                                </div>
                                <a href="${p.projectUrl}" target="_blank" class="w-8 h-8 flex items-center justify-center bg-green-500/10 text-green-400 rounded-md border border-green-500/30 hover:bg-green-500 hover:text-black transition">
                                    <i class="fas fa-arrow-right text-xs"></i>
                                </a>
                            </div>
                        </div>
                    `;
                });
            });
        }

        // --- 7. SYSTEM BOOT SEQUENCE ---
        window.onload = () => {
            // Initiate core systems silently
            executeSurveillance();
            initializeProjects();
        };
  if('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('MIO PWA: Service Worker Active', reg))
        .catch(err => console.log('MIO PWA: Registration Failed', err));
    });
  }
 // ==========================================
// üöÄ MIO ADVANCED AUDIO ENGINE (FIXED)
// ==========================================

const bgMusicElement = document.getElementById('portal-bg-music');
const clickSfxElement = document.getElementById('portal-click-sfx');
const musicToggleBtn = document.getElementById('mio-music-toggle');
const musicIcon = document.getElementById('mio-music-icon');

let isMusicActive = false;
let currentMusicUrl = "";

// ‚úÖ FIX: "database" use kiya hai kyunke aapki file me yehi naam hai
database.ref('system_config/bg_music').on('value', (snapshot) => {
    const fetchedUrl = snapshot.val();
    console.log("Audio Syncing: ", fetchedUrl);
    
    if(fetchedUrl && fetchedUrl !== currentMusicUrl) {
        currentMusicUrl = fetchedUrl;
        bgMusicElement.src = fetchedUrl;
        bgMusicElement.load();
        
        if(isMusicActive) {
            bgMusicElement.play().catch(e => console.log("Autoplay blocked"));
        }
    }
});

function togglePortalMusic() {
    // Behtar check: Agar link valid nahi hai toh alert dikhao
    if(!bgMusicElement.src || bgMusicElement.src.includes(window.location.hostname) || bgMusicElement.src === "") {
        Swal.fire({
            toast: true, position: 'top-end', icon: 'info',
            title: 'Admin: Please add a valid MP3 link in Admin Panel!',
            showConfirmButton: false, timer: 3000, background: '#05070a', color: '#00ff9d'
        });
        return;
    }

    if(isMusicActive) {
        bgMusicElement.pause();
        musicIcon.className = "fas fa-volume-mute";
        musicToggleBtn.classList.remove('is-playing');
        isMusicActive = false;
    } else {
        bgMusicElement.volume = 0.5;
        bgMusicElement.play().then(() => {
            musicIcon.className = "fas fa-volume-up";
            musicToggleBtn.classList.add('is-playing');
            isMusicActive = true;
        }).catch((err) => {
            Swal.fire({ toast: true, position: 'bottom', icon: 'error', title: 'Tap anywhere on screen first!', showConfirmButton: false, timer: 2000 });
        });
    }
}

// ‚úÖ FIX: Duplicate function hata kar sirf ek rakha hai
function triggerAccessSound(target) {
    if(clickSfxElement) {
        clickSfxElement.currentTime = 0;
        clickSfxElement.play().catch(e => console.log("SFX Blocked"));
    }

    setTimeout(() => {
        if(target.startsWith('#')) {
            const element = document.querySelector(target);
            if(element) element.scrollIntoView({ behavior: 'smooth' });
        } else {
            window.open(target, '_blank');
        }
    }, 300); 
}
function triggerAccessSound(target) {
    // 1Ô∏è‚É£ Click SFX Play Karo üîä
    if(clickSfxElement) {
        clickSfxElement.currentTime = 0;
        clickSfxElement.play().catch(e => console.log("SFX Blocked"));
    }

    // 2Ô∏è‚É£ Background Music Activate Karo (User Gesture Unlock) üéµ‚ú®
    if (bgMusicElement && !isMusicActive) {
        bgMusicElement.volume = 0.5; // 50% Volume
        bgMusicElement.play().then(() => {
            isMusicActive = true;
            // UI Update: Button ko playing state mein le aao
            if(musicIcon) musicIcon.className = "fas fa-volume-up";
            if(musicToggleBtn) musicToggleBtn.classList.add('is-playing');
            console.log("Master Audio Activated! üéß");
        }).catch(e => console.log("Music activation failed"));
    }

    // 3Ô∏è‚É£ Smooth Scroll Logic üìçüí®
    // Thoda sa delay (100ms) taake sound aur scroll ka effect feel ho
    setTimeout(() => {
        const element = document.querySelector(target);
        if(element) {
            element.scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }
    }, 100); 
}
// ==========================================
// üöÄ MIO SMART UPDATE & CACHE BUSTER
// ==========================================

const localVersion = localStorage.getItem('mio_portal_version') || '0.0.0';

database.ref('system_config/app_version').on('value', (snapshot) => {
    const serverVersion = snapshot.val();

    if (serverVersion && serverVersion !== localVersion) {
        // Agar version match nahi karta, toh update dikhao
        showUpdateNotification(serverVersion);
    }
});

function showUpdateNotification(newVer) {
    Swal.fire({
        title: 'NEW UPDATE AVAILABLE! üöÄ',
        html: `<p style="color: #ccc;">System Version <b>${newVer}</b> is now live. Click update to clear cache and sync data.</p>`,
        icon: 'info',
        showCancelButton: false,
        confirmButtonText: 'UPDATE NOW ‚ö°',
        background: '#05070a',
        color: '#fff',
        confirmButtonColor: '#00ff9d',
        allowOutsideClick: false
    }).then((result) => {
        if (result.isConfirmed) {
            applySystemUpdate(newVer);
        }
    });
}

async function applySystemUpdate(newVer) {
    // 1. Local Storage mein naya version save karo
    localStorage.setItem('mio_portal_version', newVer);

    // 2. Browser Cache Clear karne ki koshish (Service Workers)
    if ('serviceWorker' in navigator) {
        const registrations = await navigator.serviceWorker.getRegistrations();
        for (let registration of registrations) {
            registration.unregister();
        }
    }

    // 3. Sab se aham: Hard Reload (Cache bypass karke)
    // Ye browser ko majboor karta hai ke wo nayi files download kare
    Swal.fire({
        title: 'Syncing Files...',
        text: 'Please wait, clearing cache...',
        allowOutsideClick: false,
        didOpen: () => { Swal.showLoading(); }
    });

    setTimeout(() => {
        // window.location.reload(true) purana tarika hai, ab ye best hai:
        window.location.href = window.location.href + "?v=" + newVer; 
    }, 1500);
}
// ==========================================
// üöÄ MIO ADVANCED UPDATE & CACHE ENGINE
// ==========================================

// 1. Current version check (LocalStorage)
const currentLocalVer = localStorage.getItem('mio_portal_version') || '1.0.0';

// 2. Firebase se version monitor karna
database.ref('system_config/app_version').on('value', (snapshot) => {
    const serverVer = snapshot.val();
    
    if (serverVer && serverVer !== currentLocalVer) {
        showUpdateBox(serverVer);
    }
});

// 3. Update Box Show karna
function showUpdateBox(newVer) {
    const overlay = document.getElementById('update-overlay');
    const verText = document.getElementById('update-ver-text');
    const updateBtn = document.getElementById('update-confirm-btn');
    
    overlay.classList.remove('hidden');
    verText.innerText = `NEW VERSION DETECTED: ${newVer}`;
    
    updateBtn.onclick = function() {
        startUpdatingProcess(newVer);
    };
}

// 4. Updating Animation aur Cache Cleaning
async function startUpdatingProcess(newVer) {
    const progressBar = document.getElementById('update-progress');
    const statusText = document.getElementById('update-status');
    const updateBtn = document.getElementById('update-confirm-btn');
    
    updateBtn.disabled = true;
    updateBtn.innerText = "CLEANING SYSTEM...";
    
    // --- STEP 1: Browser Cache Storage ko khali karna ---
    statusText.innerText = "Deleting permanent cache storage...";
    if ('caches' in window) {
        const cacheNames = await caches.keys();
        await Promise.all(
            cacheNames.map(name => {
                console.log("Deleting Cache:", name);
                return caches.delete(name);
            })
        );
    }
    progressBar.style.width = "30%";

    // --- STEP 2: Service Workers ko khatam karna ---
    statusText.innerText = "Unregistering old system workers...";
    if ('serviceWorker' in navigator) {
        const registrations = await navigator.serviceWorker.getRegistrations();
        for (let registration of registrations) {
            await registration.unregister();
        }
    }
    progressBar.style.width = "60%";

    // --- STEP 3: Local Storage Update ---
    statusText.innerText = "Syncing new version manifest...";
    localStorage.setItem('mio_portal_version', newVer);
    progressBar.style.width = "85%";

    // --- STEP 4: Hard Reload with Cache-Busting Query ---
    statusText.innerText = "Rebooting Portal...";
    progressBar.style.width = "100%";

    setTimeout(() => {
        // window.location.reload(true) aksar kaam nahi karta, isliye URL change karein
        // Is se browser majboor ho jata hai ke wo har cheez fresh download kare
        const freshUrl = window.location.origin + window.location.pathname + "?v=" + newVer + "&t=" + Date.now();
        window.location.replace(freshUrl); 
    }, 1200);
}
// ==========================================
// üöÄ MIO MEMBERS FRONTEND ENGINE
// ==========================================

// Fetch Members and Render
database.ref('organization_members').on('value', snap => {
    const container = document.getElementById('members-container');
    if(!container) return;
    
    container.innerHTML = '';
    
    if(!snap.exists()) {
        container.innerHTML = `<p class="text-center w-full col-span-full text-gray-500 font-mono">No team profiles found.</p>`;
        return;
    }

    snap.forEach(child => {
        const m = child.val();
        // Fallback image agar link toot jaye
        const safeImage = m.imageLink || 'https://via.placeholder.com/150';
        
        container.innerHTML += `
            <div class="member-card group" data-aos="fade-up">
                
                <div class="member-img-wrap" onclick="openImageViewer('${safeImage}', '${m.name}', '${m.role}')" title="Click to view full image">
                    <img src="${safeImage}" alt="${m.name}">
                    
                    <div class="member-name-badge group-hover:bg-purple-500 group-hover:border-purple-400 transition-all">
                        <span class="text-white font-black text-xs uppercase tracking-wider">${m.name}</span>
                    </div>
                </div>

                <div class="mt-12 mb-4">
                    <span class="inline-block px-3 py-1 bg-purple-500/10 border border-purple-500/20 text-purple-400 rounded-lg text-[10px] font-mono uppercase font-bold tracking-widest">
                        <i class="fas fa-star text-[8px] mr-1"></i> ${m.role}
                    </span>
                </div>
                
                <p class="text-gray-400 text-sm leading-relaxed line-clamp-4 px-2">
                    ${m.details}
                </p>
                
                <div class="absolute inset-0 bg-gradient-to-b from-purple-500/0 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-24px pointer-events-none"></div>
            </div>
        `;
    });
});

// ==========================================
// üñºÔ∏è FULL IMAGE VIEWER LOGIC
// ==========================================
function openImageViewer(imgSrc, name, role) {
    // 1. Play Sound (if you want that digital feel)
    if(clickSfxElement) {
        clickSfxElement.currentTime = 0;
        clickSfxElement.play().catch(e => console.log(e));
    }

    // 2. Setup Data
    const modal = document.getElementById('image-viewer-modal');
    const fullImg = document.getElementById('viewer-full-img');
    document.getElementById('viewer-name').innerText = name;
    document.getElementById('viewer-role').innerText = role;
    
    fullImg.src = imgSrc;
    
    // 3. Animate In
    modal.classList.remove('hidden');
    // Chota sa delay taake display block hone ke baad opacity transition ho
    setTimeout(() => {
        modal.classList.remove('opacity-0');
        fullImg.classList.replace('scale-90', 'scale-100');
    }, 10);
}

function closeImageViewer() {
    const modal = document.getElementById('image-viewer-modal');
    const fullImg = document.getElementById('viewer-full-img');
    
    // Animate Out
    modal.classList.add('opacity-0');
    fullImg.classList.replace('scale-100', 'scale-90');
    
    setTimeout(() => {
        modal.classList.add('hidden');
        fullImg.src = ''; // Clear image
    }, 300);
}
// ==========================================
// üöÄ LAUNCHPAD (UPCOMING PROJECTS) ENGINE
// ==========================================
database.ref('scheduled_launches').on('value', snap => {
    const grid = document.getElementById('launch-grid');
    const section = document.getElementById('mi-launchpad');
    
    // Purane timers clear karein (Memory safety ke liye)
    if(window.launchIntervals) {
        window.launchIntervals.forEach(clearInterval);
    }
    window.launchIntervals = [];

    if(grid) grid.innerHTML = '';
    
    if(!snap.exists()) { 
        if(section) section.classList.add('hidden'); 
        return; 
    }
    if(section) section.classList.remove('hidden');

    snap.forEach(child => {
        const p = child.val();
        const launchID = child.key;
        
        // üõ†Ô∏è HTML Template (Button Shuru mein LOCKED rahega)
        grid.innerHTML += `
            <div class="glass-panel p-8 relative border-t-4 border-t-yellow-500 animate__animated animate__fadeInUp group hover:border-yellow-400 transition-all duration-500">
                <div class="absolute -top-10 -right-10 w-32 h-32 bg-yellow-500/10 rounded-full blur-3xl group-hover:bg-yellow-500/20 transition-all duration-500"></div>
                
                <div class="flex items-center gap-6 mb-6 relative z-10">
                    <img src="${p.logo}" class="w-20 h-20 rounded-2xl border-2 border-yellow-500/20 shadow-[0_0_15px_rgba(234,179,8,0.2)] object-cover">
                    <div>
                        <h3 class="text-2xl font-black text-white uppercase tracking-tighter">${p.title}</h3>
                        <div id="phase-badge-${launchID}" class="px-3 py-1 bg-yellow-500/10 border border-yellow-500/20 rounded-full text-[9px] font-black text-yellow-500 uppercase tracking-widest w-fit mt-2 transition-colors">
                            <i class="fas fa-clock mr-1"></i> PRE-LAUNCH PHASE
                        </div>
                    </div>
                </div>
                <p class="text-gray-400 text-sm mb-8 leading-relaxed h-12 overflow-hidden relative z-10">${p.desc}</p>
                
                <div class="grid grid-cols-4 gap-4 mb-8 relative z-10" id="clock-container-${launchID}">
                    <div class="text-center bg-black/60 p-3 rounded-xl border border-yellow-500/20 shadow-inner">
                        <div class="text-xl font-black text-yellow-500 drop-shadow-[0_0_5px_rgba(234,179,8,0.5)]" id="d-${launchID}">00</div>
                        <div class="text-[8px] text-gray-500 uppercase font-bold tracking-widest">Days</div>
                    </div>
                    <div class="text-center bg-black/60 p-3 rounded-xl border border-yellow-500/20 shadow-inner">
                        <div class="text-xl font-black text-yellow-500 drop-shadow-[0_0_5px_rgba(234,179,8,0.5)]" id="h-${launchID}">00</div>
                        <div class="text-[8px] text-gray-500 uppercase font-bold tracking-widest">Hrs</div>
                    </div>
                    <div class="text-center bg-black/60 p-3 rounded-xl border border-yellow-500/20 shadow-inner">
                        <div class="text-xl font-black text-yellow-500 drop-shadow-[0_0_5px_rgba(234,179,8,0.5)]" id="m-${launchID}">00</div>
                        <div class="text-[8px] text-gray-500 uppercase font-bold tracking-widest">Min</div>
                    </div>
                    <div class="text-center bg-black/60 p-3 rounded-xl border border-yellow-500/20 shadow-inner">
                        <div class="text-xl font-black text-yellow-500 drop-shadow-[0_0_5px_rgba(234,179,8,0.5)]" id="s-${launchID}">00</div>
                        <div class="text-[8px] text-gray-500 uppercase font-bold tracking-widest">Sec</div>
                    </div>
                </div>

                <button id="launchpad-btn-${launchID}" disabled class="w-full py-4 bg-gray-800 border border-gray-700 text-gray-500 rounded-xl font-black text-xs uppercase tracking-widest cursor-not-allowed transition-all duration-500 relative z-10 flex items-center justify-center gap-2">
                    <i class="fas fa-lock" id="launchpad-icon-${launchID}"></i> 
                    <span id="launchpad-text-${launchID}">LINK ENCRYPTED UNTIL LAUNCH</span>
                </button>
            </div>
        `;

        // ==========================================
        // ‚è≥ REAL-TIME COUNTDOWN & UNLOCK LOGIC
        // ==========================================
        const timer = setInterval(() => {
            const now = new Date().getTime();
            const target = new Date(p.time).getTime();
            const diff = target - now;
            
            if(diff > 0) {
                // Time calculate karo aur update karo
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                const dEl = document.getElementById(`d-${launchID}`);
                const hEl = document.getElementById(`h-${launchID}`);
                const mEl = document.getElementById(`m-${launchID}`);
                const sEl = document.getElementById(`s-${launchID}`);

                if(dEl) dEl.innerText = days.toString().padStart(2,'0');
                if(hEl) hEl.innerText = hours.toString().padStart(2,'0');
                if(mEl) mEl.innerText = minutes.toString().padStart(2,'0');
                if(sEl) sEl.innerText = seconds.toString().padStart(2,'0');
            } else {
                // üü¢ TIMER KHATAM (SYSTEM ONLINE)
                clearInterval(timer);
                
                // 1. Clock Remove aur System Online Text
                const clockBox = document.getElementById(`clock-container-${launchID}`);
                if(clockBox) clockBox.innerHTML = `<div class="col-span-4 text-center py-4 bg-green-500/10 border border-green-500/30 rounded-xl text-green-400 font-black tracking-widest animate-pulse shadow-[0_0_15px_rgba(0,255,157,0.2)]"><i class="fas fa-satellite-dish mr-2"></i> SYSTEM DEPLOYED & ONLINE</div>`;
                
                // 2. Status Badge Update (Pre-launch to Active)
                const badge = document.getElementById(`phase-badge-${launchID}`);
                if(badge) {
                    badge.className = "px-3 py-1 bg-green-500/10 border border-green-500/20 rounded-full text-[9px] font-black text-green-400 uppercase tracking-widest w-fit mt-2";
                    badge.innerHTML = `<i class="fas fa-check-circle mr-1"></i> ACTIVE NODE`;
                }

                // 3. üîì BUTTON UNLOCK KAREIN
                const btn = document.getElementById(`launchpad-btn-${launchID}`);
                if(btn) {
                    btn.disabled = false; // Button ko allow kar diya
                    
                    // Design Change (Grey se Glowing Yellow/Orange)
                    btn.className = "w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 border-none text-black rounded-xl font-black text-xs uppercase tracking-widest hover:scale-[1.02] transition-transform duration-300 shadow-[0_0_20px_rgba(234,179,8,0.4)] flex items-center justify-center gap-2 cursor-pointer relative z-10";
                    
                    // Icon and Text Change
                    document.getElementById(`launchpad-icon-${launchID}`).className = "fas fa-external-link-alt group-hover:animate-bounce";
                    document.getElementById(`launchpad-text-${launchID}`).innerText = "ACCESS PORTAL";

                    // Click Event Attach
                    btn.onclick = () => triggerLaunchAccess(p.link);
                }
            }
        }, 1000);
        
        window.launchIntervals.push(timer);
    });
});

// ==========================================
// üîä SOUND & REDIRECT CONTROLLER
// ==========================================
function triggerLaunchAccess(url) {
    // Play Click Sound using best available method
    if(typeof clickSfxElement !== 'undefined' && clickSfxElement) {
        clickSfxElement.currentTime = 0;
        clickSfxElement.play().catch(e => console.log("SFX Blocked"));
    } else {
        const sfx = document.getElementById('click-sfx');
        if(sfx) {
            sfx.currentTime = 0;
            sfx.play().catch(e => console.log("SFX Blocked"));
        }
    }
    
    // Direct Redirect with a futuristic notification delay
    if(url && url.trim() !== "") {
        Swal.fire({
            toast: true,
            position: 'bottom-end',
            icon: 'success',
            title: 'ESTABLISHING CONNECTION...',
            showConfirmButton: false,
            timer: 800,
            background: '#05070a',
            color: '#00ff9d'
        });
        
        setTimeout(() => {
            window.open(url, '_blank');
        }, 600);
    } else {
        Swal.fire({
            title: 'ENCRYPTION ERROR',
            text: 'Project portal link not found in database. Admin needs to add the Access Link.',
            icon: 'warning',
            background: '#05070a',
            color: '#fff',
            confirmButtonColor: '#eab308'
        });
    }
}
// ==========================================
// üöÄ MIO DIGITAL PROJECT LAUNCHER (SMOOTH VERSION)
// ==========================================

let countdownIntervals = {}; 

database.ref('organization_projects').on('value', snap => {
    const launcherContainer = document.getElementById('launcher-container');
    const projectsContainer = document.getElementById('projects-container');
    const launchPadSection = document.getElementById('launch-pad-section');
    
    // Agar containers nahi hain toh return kar jayein
    if(!launcherContainer || !projectsContainer) return;

    // Purane timers clear karein
    Object.values(countdownIntervals).forEach(clearInterval);
    countdownIntervals = {};

    let hasUpcoming = false;
    let projectsArray = [];

    snap.forEach(child => {
        let p = child.val();
        p.id = child.key;
        projectsArray.push(p);
    });

    // Pinned projects ko upar rakhein
    projectsArray.sort((a, b) => (a.isPinned === b.isPinned) ? 0 : a.isPinned ? -1 : 1);

    const now = new Date().getTime();

    // Pehle se mojood HTML ko save rakhne ke liye strings
    let launcherHTML = '';
    let projectsHTML = '';

    projectsArray.forEach(p => {
        const starCount = p.stars || 0;
        const pinnedHtml = p.isPinned ? `<div class="pinned-badge">PINNED</div>` : ``;
        
        let launchTimestamp = p.launchTime ? new Date(p.launchTime).getTime() : 0;
        let isUpcoming = (launchTimestamp > now);

        if (isUpcoming) {
            hasUpcoming = true;
            launcherHTML += `
                <div class="glass-panel p-8 relative overflow-hidden border border-yellow-500/30 shadow-[0_0_30px_rgba(255,193,7,0.05)] transform hover:scale-[1.02] transition-all duration-500">
                    <div class="absolute -top-20 -right-20 w-48 h-48 bg-yellow-500/10 rounded-full blur-3xl"></div>
                    ${pinnedHtml}
                    <div class="flex items-center gap-5 mb-4 relative z-10">
                        <img src="${p.logoLink}" class="w-20 h-20 rounded-2xl object-cover border-2 border-yellow-500/50" onerror="this.src='https://via.placeholder.com/150'">
                        <div>
                            <h3 class="text-2xl font-black text-white mb-1 uppercase tracking-wider">${p.title}</h3>
                            <div id="status-badge-${p.id}" class="inline-flex items-center gap-2 px-3 py-1 bg-yellow-500/10 text-yellow-400 border border-yellow-500/30 rounded-lg text-xs font-mono font-bold tracking-widest">
                                <i class="fas fa-lock"></i> SYSTEM LOCKED
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-400 text-sm mb-4 relative z-10 line-clamp-2">${p.description}</p>
                    <div class="countdown-box mb-6" id="countdown-box-${p.id}">
                        <div class="time-segment"><div class="time-val" id="days-${p.id}">00</div><div class="time-label">DAYS</div></div>
                        <div class="time-segment"><div class="time-val" id="hours-${p.id}">00</div><div class="time-label">HRS</div></div>
                        <div class="time-segment"><div class="time-val" id="mins-${p.id}">00</div><div class="time-label">MIN</div></div>
                        <div class="time-segment"><div class="time-val" id="secs-${p.id}">00</div><div class="time-label">SEC</div></div>
                    </div>
                    <button id="launch-btn-${p.id}" onclick="triggerAccessSound(event, '${p.projectUrl}')" class="w-full py-4 bg-gray-800 text-gray-500 rounded-xl font-black text-xs uppercase tracking-widest border border-gray-700 cursor-not-allowed" disabled>
                        ACCESS DENIED UNTIL LAUNCH
                    </button>
                </div>
            `;
            startCountdown(p.id, launchTimestamp, p.projectUrl);
        } else {
            let borderColor = p.isPinned ? 'border-cyan-500/50' : 'border-white/10';
            projectsHTML += `
                <div class="glass-panel p-6 flex flex-col h-full relative overflow-hidden group border ${borderColor}">
                    ${pinnedHtml}
                    <div class="flex items-start gap-5 mb-6 relative z-10">
                        <img src="${p.logoLink}" class="w-16 h-16 rounded-2xl object-cover shadow-lg border border-white/10" onerror="this.src='https://via.placeholder.com/150'">
                        <div>
                            <h3 class="text-xl font-bold text-white mb-1 leading-tight">${p.title}</h3>
                            <div onclick="addStar(event, '${p.id}')" class="cursor-pointer inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-green-500/10 text-green-400 border border-green-500/20 text-[10px] font-mono uppercase font-bold hover:bg-green-500/20 transition-all">
                                <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span>
                                Stars: <span id="star-count-${p.id}" class="text-white ml-1">${starCount}</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-400 text-sm mb-8 flex-1 relative z-10 line-clamp-3">${p.description}</p>
                    <button onclick="triggerAccessSound(event, '${p.projectUrl}')" class="w-full py-4 bg-gradient-to-r from-green-500 to-cyan-500 text-black rounded-xl font-black text-[10px] uppercase tracking-widest relative z-10 flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform shadow-lg">
                        <span>ACCESS PORTAL</span>
                        <i class="fas fa-external-link-alt"></i>
                    </button>
                </div>
            `;
        }
    });

    // Sirf tab update karein jab data waqai change ho (Smoothness ke liye)
    if(launcherContainer.innerHTML !== launcherHTML) launcherContainer.innerHTML = launcherHTML;
    if(projectsContainer.innerHTML !== projectsHTML) projectsContainer.innerHTML = projectsHTML;

    if (hasUpcoming) launchPadSection.classList.remove('hidden');
    else launchPadSection.classList.add('hidden');
});

// ==========================================
// ‚≠ê UPDATED STAR FUNCTION (No Jump)
// ==========================================
function addStar(event, projectId) {
    if(event) event.preventDefault(); // Browser ko jump karne se rokta hai

    const starRef = database.ref('organization_projects/' + projectId + '/stars');
    starRef.transaction(currentStars => {
        return (currentStars || 0) + 1;
    }).then(() => {
        // Sirf sound play karein, page refresh ki zaroorat nahi
        const sfx = document.getElementById('click-sfx');
        if(sfx) { sfx.currentTime = 0; sfx.play().catch(e => {}); }
    });
}

// ==========================================
// üîä UPDATED ACCESS SOUND (No Jump)
// ==========================================
function triggerAccessSound(event, url) {
    if(event) event.preventDefault(); // Link behavior ko control karne ke liye

    const sfx = document.getElementById('click-sfx');
    if(sfx) { sfx.currentTime = 0; sfx.play().catch(e => {}); }

    if(url && url !== "") {
        setTimeout(() => {
            window.open(url, '_blank'); // Naye tab mein khole ga bina page load kiye
        }, 300);
    }
}

// ==========================================
// ‚è±Ô∏è TIMER LOGIC (No Reload)
// ==========================================
function startCountdown(projectId, launchTimeMs, projectUrl) {
    countdownIntervals[projectId] = setInterval(() => {
        const now = new Date().getTime();
        const distance = launchTimeMs - now;

        if (distance <= 0) {
            clearInterval(countdownIntervals[projectId]);
            // Reload ke bajaye UI update karein
            const btn = document.getElementById(`launch-btn-${projectId}`);
            const badge = document.getElementById(`status-badge-${projectId}`);
            const box = document.getElementById(`countdown-box-${projectId}`);

            if(box) box.innerHTML = `<div class="text-green-400 font-black text-center w-full animate-pulse">SYSTEM ONLINE</div>`;
            if(badge) badge.innerHTML = `<i class="fas fa-unlock"></i> ONLINE`;
            if(btn) {
                btn.disabled = false;
                btn.innerText = "ENTER PORTAL NOW";
                btn.classList.replace('bg-gray-800', 'bg-yellow-500');
                btn.classList.replace('text-gray-500', 'text-black');
                btn.classList.replace('cursor-not-allowed', 'cursor-pointer');
            }
            return;
        }

        // Timer calculation logic (Same as before)
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        if(document.getElementById(`days-${projectId}`)) {
            document.getElementById(`days-${projectId}`).innerText = days.toString().padStart(2, '0');
            document.getElementById(`hours-${projectId}`).innerText = hours.toString().padStart(2, '0');
            document.getElementById(`mins-${projectId}`).innerText = minutes.toString().padStart(2, '0');
            document.getElementById(`secs-${projectId}`).innerText = seconds.toString().padStart(2, '0');
        }
    }, 1000);
}

    </script>
</body>
</html>
